---
import Layout from '@/layouts/Layout.astro'
import { experiences, education, skills } from '../data/cv'
import CvTimeline from '@/components/ui/CvTimeline.astro'

import type { Experience, Education } from '../types/cv'
import List from '@/components/ui/List.astro'

let orderedExperiences: Experience[] = []
let orderedEducations: Education[] = []

const orderElement = <T extends { time: string }>(a: T, b: T) => {
  const presentValues = ['present', 'now', 'current', 'today']
  if (
			presentValues.includes(
				(a['time'] as string)?.split(' - ')[1]?.toLowerCase()
			)
		) {
			return -1
		}
		const dateA = new Date((a['time'] as string)?.split(' - ')[1])
		const dateB = new Date((b['time'] as string)?.split(' - ')[1])
		return dateB.getTime() - dateA.getTime()
}

if (experiences.length > 0) {
	orderedExperiences = experiences.sort((a, b) => {
		return orderElement(a, b)
	})
}

if (education.length > 0) {
	orderedEducations = education.sort((a, b) => {
		return orderElement(a, b)
	})
}
---

<Layout title="My Journey">
        <!-- Page Header -->
        <div class="mb-10">
                <h1 class="text-3xl font-bold mb-2">My Journey</h1>
                <p class="text-base-content/60 text-lg">From physics to computational biophysics â€” the path that brought me here.</p>
        </div>

        <!-- Personal Intro -->
        <section class="mb-12">
                <div class="prose max-w-none text-base-content/80">
                        <p>
                                My journey into computational biophysics began with a deep curiosity about the physical
                                principles governing biological systems. Starting with a foundation in Physics from the
                                University of Calcutta, I moved into Biophysics at the University of Kalyani, where I
                                discovered the power of computational methods in understanding molecular interactions.
                                During my Ph.D. at IIT Indore, I developed expertise in molecular dynamics simulations,
                                enhanced sampling techniques, and free energy calculations to study complex biomolecular
                                systems. Today, as a Postdoctoral Research Associate at Purdue University in Prof. Carol
                                Beth Post's lab, I combine these computational approaches with structural biology methods
                                like cryo-EM and NMR to unravel protein dynamics at the atomic level.
                        </p>
                </div>
        </section>

        {
                orderedExperiences.length > 0 && (
                        <section class='mb-12'>
                                <h2 class='text-2xl font-bold mb-6 border-b pb-2'>
                                        Experiences
                                </h2>
                                <CvTimeline elements={orderedExperiences} colored={true} />
                        </section>
                )
        }

	{
		orderedEducations.length > 0 && (
			<section class='mb-12'>
				<h2 class='text-2xl font-bold mb-6 border-b pb-2'>
					Education
				</h2>
				<CvTimeline elements={orderedEducations} colored={true} />
			</section>
		)
	}

	{
		skills.length > 0 && (
			<section class='mb-12'>
				<List listTitle='Skills' listItems={skills}/>
			</section>
		)
	}
</Layout>
